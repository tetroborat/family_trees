{% extends 'base_tree_view_page.html' %}
{% block content %}
<div class="container shadow">
    {% if auth_user == alien_user %}
    <div class="row">
        <div class="col" align="right">
            <a class="text-decoration-none button_white" type="button" data-toggle="modal" data-target="#ModalReference"
               style="margin: 0;height: 35px">
                <svg data-toggle="tooltip" title="Справка" xmlns="http://www.w3.org/2000/svg" width="1.75em"
                     height="1.75em"
                     fill="#343a40" class="bi bi-question"
                     viewBox="3 2 12 12">
                    <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                </svg>
            </a>

            <div class="modal fade" id="ModalReference" tabindex="-1" role="dialog"
                 aria-labelledby="ModalReferenceCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                    <div class="modal-content" style="border-radius: 20px">
                        <div class="modal-header">
                            <h3 class="modal-title" id="ModalReferenceLongTitle">
                                Профиль
                            </h3>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p align="left" class="lead">
                                Здесь Вы можете посмореть
                                <mark>генеалогические деревья</mark>
                                . Их название формируется исходя из того, какой из указаных Вами родственников является самым старшим.
                                Родственники, родители которых не известны, считаются корнем генеалогического дерева - самым старшим прародителем.
                                <br><Br>
                                Также здесь Вы можете посмотреть профили пользователей,
                                допустивших Вас к своим деревьям.
                                Для составления какой-либо из ветвей родословной нажмите на соотвествующее
                                генеалогическое дерево.
                                <br><br>
                                Нажав на
                                <a class="text-decoration-none button_white ref" type="button"
                                   style="margin: 0; padding: 2.5px; height: 42px" href="/sunburst/">
                                    <svg data-toggle="tooltip" title="Прямые прародители" xmlns="http://www.w3.org/2000/svg"
                                         width="1.75em" height="1.75em" fill="#343a40" class="bi bi-bullseye"
                                         viewBox="0 0 16 16">
                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                        <path d="M8 13A5 5 0 1 1 8 3a5 5 0 0 1 0 10zm0 1A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"/>
                                        <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"/>
                                        <path d="M9.5 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                                    </svg>
                                </a>
                                можно посмотреть на всех Ваших прямых прародителей. Любое из состояний виджета можно сохранить
                                или распечатать нажав правую кнопку мыши.
                                <br><br>
                                Нажмите
                                <a href="{{ change_info_user }}" class="text-decoration-none button_white ref">
                                    <svg width="1.75em" title="Изменение данных" data-toggle="tooltip" height="1.75em"
                                         viewBox="0 0 16 16"
                                         class="bi bi-gear" fill="#343a40" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd"
                                              d="M8.837 1.626c-.246-.835-1.428-.835-1.674 0l-.094.319A1.873 1.873 0 0 1 4.377 3.06l-.292-.16c-.764-.415-1.6.42-1.184 1.185l.159.292a1.873 1.873 0 0 1-1.115 2.692l-.319.094c-.835.246-.835 1.428 0 1.674l.319.094a1.873 1.873 0 0 1 1.115 2.693l-.16.291c-.415.764.42 1.6 1.185 1.184l.292-.159a1.873 1.873 0 0 1 2.692 1.116l.094.318c.246.835 1.428.835 1.674 0l.094-.319a1.873 1.873 0 0 1 2.693-1.115l.291.16c.764.415 1.6-.42 1.184-1.185l-.159-.291a1.873 1.873 0 0 1 1.116-2.693l.318-.094c.835-.246.835-1.428 0-1.674l-.319-.094a1.873 1.873 0 0 1-1.115-2.692l.16-.292c.415-.764-.42-1.6-1.185-1.184l-.291.159A1.873 1.873 0 0 1 8.93 1.945l-.094-.319zm-2.633-.283c.527-1.79 3.065-1.79 3.592 0l.094.319a.873.873 0 0 0 1.255.52l.292-.16c1.64-.892 3.434.901 2.54 2.541l-.159.292a.873.873 0 0 0 .52 1.255l.319.094c1.79.527 1.79 3.065 0 3.592l-.319.094a.873.873 0 0 0-.52 1.255l.16.292c.893 1.64-.902 3.434-2.541 2.54l-.292-.159a.873.873 0 0 0-1.255.52l-.094.319c-.527 1.79-3.065 1.79-3.592 0l-.094-.319a.873.873 0 0 0-1.255-.52l-.292.16c-1.64.893-3.433-.902-2.54-2.541l.159-.292a.873.873 0 0 0-.52-1.255l-.319-.094c-1.79-.527-1.79-3.065 0-3.592l.319-.094a.873.873 0 0 0 .52-1.255l-.16-.292c-.892-1.64.902-3.433 2.541-2.54l.292.159a.873.873 0 0 0 1.255-.52l.094-.319z"></path>
                                        <path fill-rule="evenodd"
                                              d="M8 5.754a2.246 2.246 0 1 0 0 4.492 2.246 2.246 0 0 0 0-4.492zM4.754 8a3.246 3.246 0 1 1 6.492 0 3.246 3.246 0 0 1-6.492 0z"></path>
                                    </svg>
                                </a>
                                чтобы
                                <mark>изменить данные профиля</mark>.
                                <br><br>
                                Кнопка
                                <a class="button_red" type="button" data-toggle="modal"
                                   data-target="#exampleModalCenter">
                                    <svg data-toggle="tooltip" title="Удаление аккаунта" width="1.75em" height="1.75em"
                                         viewBox="0 0 16 16" class="bi bi-person-x" fill="#343a40"
                                         xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd"
                                              d="M8 5a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6 5c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10zm1.146-7.85a.5.5 0 0 1 .708 0L14 6.293l1.146-1.147a.5.5 0 0 1 .708.708L14.707 7l1.147 1.146a.5.5 0 0 1-.708.708L14 7.707l-1.146 1.147a.5.5 0 0 1-.708-.708L13.293 7l-1.147-1.146a.5.5 0 0 1 0-.708z"/>
                                    </svg>
                                </a>
                                <mark>удалит аккаунт</mark>.
                            </p>
                        </div>

                    </div>
                </div>
            </div>

            <a class="text-decoration-none button_white" type="button"
               style="margin: 0; padding: 5px; height: 35px" href="/sunburst/">
                <svg data-toggle="tooltip" title="Прямые прародители" xmlns="http://www.w3.org/2000/svg"
                     width="1.75em" height="1.75em" fill="#343a40" class="button-rotate bi bi-bullseye"
                     viewBox="0 0 16 17">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                    <path d="M8 13A5 5 0 1 1 8 3a5 5 0 0 1 0 10zm0 1A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"/>
                    <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"/>
                    <path d="M9.5 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                </svg>
            </a>

            <a href="{{ change_info_user }}" class="text-decoration-none button_white" style="margin-right: 5px">
                <svg width="1.75em" title="Изменение данных" data-toggle="tooltip" height="1.75em" viewBox="0 0 16 16"
                     class="button-rotate bi bi-gear" fill="#343a40" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                          d="M8.837 1.626c-.246-.835-1.428-.835-1.674 0l-.094.319A1.873 1.873 0 0 1 4.377 3.06l-.292-.16c-.764-.415-1.6.42-1.184 1.185l.159.292a1.873 1.873 0 0 1-1.115 2.692l-.319.094c-.835.246-.835 1.428 0 1.674l.319.094a1.873 1.873 0 0 1 1.115 2.693l-.16.291c-.415.764.42 1.6 1.185 1.184l.292-.159a1.873 1.873 0 0 1 2.692 1.116l.094.318c.246.835 1.428.835 1.674 0l.094-.319a1.873 1.873 0 0 1 2.693-1.115l.291.16c.764.415 1.6-.42 1.184-1.185l-.159-.291a1.873 1.873 0 0 1 1.116-2.693l.318-.094c.835-.246.835-1.428 0-1.674l-.319-.094a1.873 1.873 0 0 1-1.115-2.692l.16-.292c.415-.764-.42-1.6-1.185-1.184l-.291.159A1.873 1.873 0 0 1 8.93 1.945l-.094-.319zm-2.633-.283c.527-1.79 3.065-1.79 3.592 0l.094.319a.873.873 0 0 0 1.255.52l.292-.16c1.64-.892 3.434.901 2.54 2.541l-.159.292a.873.873 0 0 0 .52 1.255l.319.094c1.79.527 1.79 3.065 0 3.592l-.319.094a.873.873 0 0 0-.52 1.255l.16.292c.893 1.64-.902 3.434-2.541 2.54l-.292-.159a.873.873 0 0 0-1.255.52l-.094.319c-.527 1.79-3.065 1.79-3.592 0l-.094-.319a.873.873 0 0 0-1.255-.52l-.292.16c-1.64.893-3.433-.902-2.54-2.541l.159-.292a.873.873 0 0 0-.52-1.255l-.319-.094c-1.79-.527-1.79-3.065 0-3.592l.319-.094a.873.873 0 0 0 .52-1.255l-.16-.292c-.892-1.64.902-3.433 2.541-2.54l.292.159a.873.873 0 0 0 1.255-.52l.094-.319z"></path>
                    <path fill-rule="evenodd"
                          d="M8 5.754a2.246 2.246 0 1 0 0 4.492 2.246 2.246 0 0 0 0-4.492zM4.754 8a3.246 3.246 0 1 1 6.492 0 3.246 3.246 0 0 1-6.492 0z"></path>
                </svg>
            </a>
            <a class="button_red" type="button" data-toggle="modal" data-target="#exampleModalCenter">
                <svg data-toggle="tooltip" title="Удаление аккаунта" width="1.75em" height="1.75em"
                     viewBox="0 0 16 16" class="bi bi-person-x" fill="#343a40" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                          d="M8 5a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6 5c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10zm1.146-7.85a.5.5 0 0 1 .708 0L14 6.293l1.146-1.147a.5.5 0 0 1 .708.708L14.707 7l1.147 1.146a.5.5 0 0 1-.708.708L14 7.707l-1.146 1.147a.5.5 0 0 1-.708-.708L13.293 7l-1.147-1.146a.5.5 0 0 1 0-.708z"/>
                </svg>
            </a>
            <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
                 aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content" style="border-radius: 20px;">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLongTitle">
                                Удаление аккаунта <span
                                    class="shadow badge rounded-pill bg-info text-dark">{{ alien_user }}</span>
                            </h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p align="left">
                                Вы точно хотите удалить свой аккаунт?
                            </p>
                        </div>
                        <div class="modal-footer">
                            <a type="button" class="shadow btn btn-danger" href="{{ delete_user_info }}"
                               title="Удаление пользователя" class="text-decoration-none"
                               style="width: 100px; border-radius: 15px;">
                                Да
                            </a>
                            <button type="button" class="shadow btn btn-secondary" data-dismiss="modal"
                                    style="width: 100px; border-radius: 15px;">
                                Нет
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="form-inline">
        {% else %}
        <div class="form-inline" style="margin-top: 32px">
            {% endif %}
            <h1 class="display-3">
                {{ alien_user.first_name }} {{ alien_user.last_name }}
            </h1>
            <h1 class="display-4" style="margin: 10px 10px 0 15px">
        <span class="shadow badge rounded-pill bg-info text-dark">
            {{ alien_user }}
        </span>
            </h1>
        </div>
        <div class="row">
            <div class="col-3">
                <h1 class="display-4">
                    Предки:
                </h1>
            </div>
            <div class="col" style="margin-top: 16px">
                {% for tree, number in alien_user_trees.items %}
                <h1 class="display-5 row">
                    <div class="col">
                        <a href="{{ tree.get_absolute_url }}"><span
                                class="shadow badge rounded-pill bg-success text-dark">{{ tree }}
                            {% if number %}
                                <span class="shadow position-absolute top-0 start-100 translate-middle badge rounded-circle bg-danger">
                                    {{ number }}
                                </span>
                            {% endif %}
                            <br>
                            <small class="text-muted">
                                <font color="#fbfbf5">
                                    {{ tree.get_count_human }}
                                </font>
                            </small>
                        </span></a>
                    </div>
                    <div class="col-4" style="margin-right: 100px">
                        <a href="{{ tree.get_journal_url }}">
                            <div align="center">
                                <span class="badge rounded-pill text-dark">
                                        {% if auth_user == alien_user %}
                                            Вы
                                        {% else %}
                                            {{ alien_user.first_name }}
                                        {% endif %}
                                        <br>
                                        <small class="text-muted">
                                            {{ tree.get_count_users }}
                                        </small>
                                </span>
                            </div>
                        </a>
                    </div>
                </h1>
                {% endfor %}
                {% if alien_user_change_trees %}
                {% if alien_user_trees %}
                <hr color="#64656d60" style="margin: 18px 50px 0 0"/>
                <br>
                {% endif %}
                {% for tree, number in alien_user_change_trees.items %}
                <h1 class="display-5 row">
                    <div class="col-5">
                        <a href="{{ tree.get_absolute_url }}">
                        <span class="shadow badge rounded-pill bg-success text-dark">
                            {{ tree }}
                            {% if number %}
                                <span class="shadow position-absolute top-0 start-100 translate-middle badge rounded-circle bg-danger">
                                    {{ number }}
                                </span>
                            {% endif %}
                            <br>
                            <small class="text-muted">
                                <font color="#fbfbf5">
                                    {{ tree.get_count_human }}
                                </font>
                            </small>
                        </span></a>
                    </div>
                    <div class="col">
                        <a href="{{ tree.get_journal_url }}">
                            <div align="center">
                            <span class="badge rounded-pill text-dark">
                                {{ tree.creator.first_name }} {{ tree.creator.last_name }}
                                <br>
                                <small class="text-muted">
                                    {{ tree.get_count_users }}
                                </small>
                            </span>
                            </div>
                        </a>
                    </div>
                </h1>
                {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock content %}